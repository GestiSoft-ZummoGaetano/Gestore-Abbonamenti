<ResourceDictionary xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors">

    <!-- Stile per il pulsante nel DatePicker -->
    <Style TargetType="ToggleButton" x:Key="DatePickerToggleButtonStyle">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border Background="Transparent" Padding="5">
                        <Path 
                         Data="M 0 0 L 8 0 L 4 8 Z"
                         Fill="Gray"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Stile personalizzato per il DatePicker -->
    <Style TargetType="DatePicker" x:Key="CustomDatePickerStyle">
        <Setter Property="Foreground" Value="Black" />
        <Setter Property="Background" Value="White" />
        <Setter Property="BorderBrush" Value="Gray" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DatePicker">
                    <Grid>
                        <!-- Contenitore del DatePicker -->
                        <Border 
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="5">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <!-- Colonna per il TextBox -->
                                    <ColumnDefinition Width="*" />
                                    <!-- Colonna per il ToggleButton -->
                                    <ColumnDefinition Width="30" />
                                </Grid.ColumnDefinitions>
                                <!-- Campo di testo per la data -->
                                <TextBox 
                                    Name="PART_TextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Stretch"
                                    HorizontalContentAlignment="Center"
                                    Padding="5,0,5,0"
                                    FontSize="{TemplateBinding FontSize}"
                                    Text="{Binding SelectedDate, RelativeSource={RelativeSource TemplatedParent}, StringFormat=dd/MM/yyyy}"
                                    Grid.Column="0">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
                                            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                                <!-- Pulsante per il selettore della data -->
                                <ToggleButton 
                                    Name="PART_Button"
                                    Width="30"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    Style="{StaticResource DatePickerToggleButtonStyle}"
                                    IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                    Grid.Column="1">
                                    <Path 
                                        Data="M 0 0 L 8 0 L 4 8 Z"
                                        Fill="Gray"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                </ToggleButton>
                            </Grid>
                        </Border>
                        <!-- Popup per il calendario -->
                        <Popup 
                            Name="PART_Popup"
                            Placement="Bottom"
                            StaysOpen="False"
                            AllowsTransparency="True"
                            IsOpen="{Binding IsChecked, ElementName=PART_Button}">
                            <Border 
                                Background="White"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                CornerRadius="5">
                                <Calendar Name="PART_Calendar"
                                          SelectedDate="{Binding SelectedDate, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <!-- Trigger per quando il DatePicker è disabilitato -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="Gray" />
                            <Setter Property="Background" Value="#EEEEEE" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
