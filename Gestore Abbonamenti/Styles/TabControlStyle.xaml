<ResourceDictionary xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">

    <SolidColorBrush x:Key="PrimaryBlueColor" Color="WhiteSmoke" />
    <SolidColorBrush x:Key="SecondaryTextColor" Color="#BBC1D1" />

    <Style x:Key="TabItemStyle" TargetType="TabItem">
        <Setter Property="Background" Value="WhiteSmoke"/>
        <Setter Property="Foreground" Value="{StaticResource SecondaryTextColor}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="12 10"/>
        <Setter Property="VerticalAlignment" Value="Top"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabItem">
                    <Border CornerRadius="5"
                        Background="{TemplateBinding Background}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        BorderBrush="{TemplateBinding BorderBrush}">
                        <!-- Layout interno del TabItem -->
                        <Grid SnapsToDevicePixels="True" Margin="0">
                            <Grid.ColumnDefinitions>
                                <!-- Colonna per la barretta sinistra -->
                                <ColumnDefinition Width="10"/>
                                <!-- Colonna per il contenuto -->
                                <ColumnDefinition Width="*"/>
                                <!-- Colonna per la barretta destra -->
                                <ColumnDefinition Width="10"/>
                            </Grid.ColumnDefinitions>

                            <!-- Barretta azzurra sinistra (all'interno del tab) -->
                            <Border x:Name="LeftIndicator"
                                Background="LightBlue"
                                Visibility="Collapsed"
                                Grid.Column="0"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Width="3"
                                Margin="-6,0,0,0"/>

                            <!-- Contenuto del Tab -->
                            <ContentPresenter Grid.Column="1"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          SnapsToDevicePixels="True"
                                          RecognizesAccessKey="True"
                                          Margin="{TemplateBinding Padding}"
                                          ContentSource="Header"
                                          Focusable="False"/>

                            <!-- Barretta azzurra destra (all'interno del tab) -->
                            <Border x:Name="RightIndicator"
                                Background="LightBlue"
                                Visibility="Collapsed"
                                Grid.Column="2"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Width="3"
                                Margin="0,0,-6,0"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!-- Cambiamenti al passaggio del mouse -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource PrimaryBlueColor}"/>
                            <Setter Property="Foreground" Value="Black"/>
                        </Trigger>
                        <!-- Barretta visibile se selezionato -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{StaticResource PrimaryBlueColor}"/>
                            <Setter Property="Foreground" Value="Black"/>
                            <Setter TargetName="LeftIndicator" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="RightIndicator" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Stile per il TabControl -->
    <Style x:Key="TabControlStyle" TargetType="TabControl">
        <Setter Property="Background" Value="WhiteSmoke"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="5"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabControl">
                    <Grid SnapsToDevicePixels="True">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TabPanel Grid.Row="0" Background="Transparent" IsItemsHost="True" HorizontalAlignment="Left"/>
                        <Border Grid.Row="1" CornerRadius="5" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}"
                            BorderBrush="{TemplateBinding BorderBrush}" Margin="{TemplateBinding Margin}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                          SnapsToDevicePixels="True" RecognizesAccessKey="True"
                                          Margin="{TemplateBinding Padding}" ContentSource="SelectedContent" Focusable="False"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
